<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>ReactReduxStore</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/7.1.1/react-redux.min.js"></script>
    <script src="https://unpkg.com/react-redux@latest/dist/react-redux.js"></script>
    <script src="https://unpkg.com/redux@latest/dist/redux.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel">
      // React code goes here...
      const Counter = props => {
        console.log("props", props);
        return (
          <div className="row">
            <div className="col-md-12">
              <h4>
                Value : <span> {props.value}</span>
              </h4>
              <button className="btn btn-primary m-2" onClick={props.countUp}>
                countup
              </button>
              <button
                className="btn btn-primary m-2"
                onClick={props.countDown}
                disabled={props.value <= 0 ? true : false}
              >
                countDown
              </button>
              <button
                className="btn btn-warning m-2"
                onClick={props.reSet}
                disabled={props.value <= 0 ? true : false}
              >
                Reset
              </button>
            </div>
          </div>
        );
      };
      let mapStateToProps = state => {
        return {
          value: state.value
        };
      };
      let mapDispatchToProps = dispatch => {
        return {
          countUp: () => dispatch({ type: "INC" }),
          countDown: () => dispatch({ type: "DEC" }),
          reSet: () => dispatch({ type: "RESET" })
        };
      };
      let CounterApp = ReactRedux.connect(mapStateToProps, mapDispatchToProps)(
        Counter
      );

      class App extends React.Component {
        render() {
          // console.log("Counter", Counter)
          return <CounterApp />;
        }
      }

      //   Redux code goes here...
      let INITIAL_STATE = { value: 0 };
      const counterReducer = (state = INITIAL_STATE, action) => {
        let newState = { ...state };
        switch (action.type) {
          case "INC": {
            return {
              ...newState,
              value: newState.value + 1
            };
          }
          case "DEC": {
            return {
              ...newState,
              value: newState.value - 1
            };
          }
          case "RESET": {
            return {
              ...newState,
              value: 0
            };
          }
          default:
            return newState;
        }
      };
      let store = Redux.createStore(
        counterReducer,
        window.devToolsExtension ? window.devToolsExtension() : undefined
      );

      console.log("sample store", store.getState());

      ReactDOM.render(
        <ReactRedux.Provider store={store}>
          <App />
        </ReactRedux.Provider>,
        document.getElementById("root")
      );
      if (window.devToolsExtension) {
        window.devToolsExtension.open();
      }
    </script>
  </body>
</html>
